Header:
    version: 133
ImportedPackages:
- "~res:/UI/Screens3/Lobby/Common/Resource/Currency.yaml"
Prototypes:
-   class: "UIControl"
    name: "LevelPurchaseOverlay"
    size: [1000.000000, 840.000000]
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
        UIDataParamsComponent:
            params:
            - ["StatsDataModel", "stats", "null", "{ }"]
            - ["BattlePass", "battlePass", "null", "{ }"]
            - ["vector<int>", "levelsIds", "[ ]", "[ 1001; 1002; 1003; 1004; ]"]
            - ["bool", "wasPushed", "true", "true"]
            events: []
        UIDataLocalBindingsComponent:
            data:
            - ["bool", "hasChest", "not isNull(battlePass.chest)"]
            - ["int", "levelsCount", "Size(battlePass.levels)"]
            - ["bool", "isLastLevelCompleted", "battlePass.activeLevelIndex == levelsCount - 1 and battlePass.levels[battlePass.activeLevelIndex].currentProgress == battlePass.levels[battlePass.activeLevelIndex].totalProgress"]
            - ["int", "offersSize", "Size(battlePass.offers)"]
            - ["bool", "isBlocked", "battlePass.pathsInfo[eBattlePassPath.Paid].isOpened == false"]
            - ["bool", "convertProxyToLevels", "not battlePass.resources.strings.Contains(\"convertProxyToLevelNumberInPurchaseScreen\") or battlePass.resources.strings[\"convertProxyToLevelNumberInPurchaseScreen\"] != \"false\""]
            - ["int", "levelsAmountRatio", "when Size(battlePass.levels) > 0 -> battlePass.levels[battlePass.activeLevelIndex].totalProgress, 1"]
            - ["string", "progressInfo", "when hasChest and isLastLevelCompleted -> localize(\"BattlePass/LevelPurchase/ChestInfo\", { \"currentLevel\" = str(battlePass.chest.currentProgress); \"maximumLevel\" = str(battlePass.chest.totalProgress); }), localize(\"BattlePass/LevelPurchase/CurrentLevel\", { \"currentLevel\" = str(when isLastLevelCompleted -> Size(battlePass.levels), battlePass.activeLevelIndex); \"maximumLevel\" = str(Size(battlePass.levels)); })"]
    children:
    -   class: "UIControl"
        name: "AdditionalInfo"
        size: [32.000000, 32.000000]
        input: false
        components:
            Anchor:
                rightAnchorEnabled: true
                rightAnchor: 16.000000
                topAnchorEnabled: true
                topAnchor: 3.000000
            LinearLayout: {}
            SizePolicy:
                horizontalPolicy: "PercentOfChildrenSum"
                verticalPolicy: "PercentOfMaxChild"
        children:
        -   prototype: "Currency/Currency"
            name: "Gold"
            components:
                UIDataParamsComponent:
                    args:
                        "currencySize": "eCurrencySize.BIG"
                        "forButton": "false"
                        "canAfford": "true"
                        "isPlusTopPaneVisible": "false"
                        "serverTime": "0L"
                        "plusVisible": "false"
                        "resource": "stats.gold"
        -   class: "UIControl"
            name: "Control"
            size: [32.000000, 32.000000]
            input: false
            components:
                SizePolicy:
                    horizontalPolicy: "Formula"
                    horizontalFormula: "safeAreaInsets.right"
    -   class: "UIControl"
        name: "OverlayScreen"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
            UIChildComponent0:
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Overlay/Overlay.yaml"
                args:
                    "wasPushed": "wasPushed"
                    "title": "\"BattlePass/LevelPurchase/Header\""
                    "content": "Content"
                eventActions:
                - ["OVERLAY_OPEN_FINISH", "OVERLAY_OPEN_FINISH", ""]
                - ["BACK_EVENT", "BACK_EVENT", ""]
Slots:
-   class: "UIControl"
    name: "Content"
    size: [800.000000, 530.000000]
    input: false
    components:
        Anchor:
            hCenterAnchorEnabled: true
        LinearLayout:
            orientation: "TopDown"
            spacing: 20.000000
        SizePolicy:
            horizontalPolicy: "Formula"
            horizontalFormula: "when parent < 1200 -> 800, 1040"
            verticalPolicy: "PercentOfChildrenSum"
    children:
    -   class: "UIControl"
        name: "MainContent"
        position: [0.000000, 0.000000]
        input: false
        components:
            Anchor:
                hCenterAnchorEnabled: true
            LinearLayout:
                dynamicPadding: true
                dynamicSpacing: true
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfMaxChild"
                verticalMin: 440.000000
            UIRepeatComponent:
                control: "~res:/UI/Screens3/Lobby/BattlePass/PurchaseLevelCell.yaml"
                dataContainer: "levelsIds"
                args:
                    "alwaysVisible": "_index == 0 or hasChest"
                    "enabled": "not isBlocked"
                    "convertProxyToLevels": "convertProxyToLevels and not (hasChest and isLastLevelCompleted)"
                    "levelsAmountRatio": "levelsAmountRatio"
                    "totalProxyLeft": "battlePass.totalProxyLeft"
                    "levelAmountCaption": "when battlePass.resources.strings.Contains(str(_index)) -> battlePass.resources.strings[str(_index)], \"#УРОВЕНЬ\""
                    "offer": "battlePass.offers[levelsIds[_index]]"
                    "backgroundUrl": "battlePass.resources.graphics[\"purchaseLevelBackground\" + str(battlePass.offers[levelsIds[_index]].stepId)]"
                eventActions:
                - ["ON_CARD_CLICK", "ON_CARD_CLICK", "_event"]
        bindings:
        - ["SizePolicy.horizontalValue", "when offersSize > 3 -> 110, 100"]
    -   class: "UIControl"
        name: "Footer"
        size: [32.000000, 32.000000]
        input: false
        components:
            LinearLayout:
                orientation: "TopDown"
                padding: "-40"
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "FixedSize"
                verticalValue: 60.000000
        children:
        -   class: "UIControl"
            name: "LevelsProgressInfo"
            input: false
            classes: "t-body regular color white-wild-sand-50-text"
            components:
                UITextComponent:
                    colorInheritType: "COLOR_IGNORE_PARENT"
                    align: ["LEFT", "VCENTER"]
                Anchor:
                    hCenterAnchorEnabled: true
                    vCenterAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfContent"
                    verticalPolicy: "PercentOfContent"
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
            bindings:
            - ["visible", "not isBlocked"]
            - ["UITextComponent.text", "progressInfo"]
        -   class: "UIControl"
            name: "BuyPremiumPassButton"
            position: [400.000000, -30.000000]
            input: false
            components:
                Anchor:
                    hCenterAnchorEnabled: true
                    vCenterAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfFirstChild"
                    verticalPolicy: "PercentOfFirstChild"
                UIAttachLayoutMasterComponent:
                    attachId: "BUY_BUTTON"
                UIChildComponent0:
                    condition: "isBlocked"
                    prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                    args:
                        "caption": "\"BattlePass/BuyPaidBattlePass/Button\""
                        "type": "eButtonType.ALTERNATIVE"
                        "size": "eButtonSize.NORMAL"
                        "enabled": "true"
                    eventActions:
                    - ["ON_CLICK_BUTTON", "ON_BUY_BATTLE_PASS", ""]
            bindings:
            - ["visible", "isBlocked"]
