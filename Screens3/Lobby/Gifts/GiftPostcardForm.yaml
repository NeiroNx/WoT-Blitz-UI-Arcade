Header:
    version: 141
ImportedPackages:
- "~res:/UI/Screens3/Common/VerticalScrollBar.yaml"
Prototypes:
-   class: "UIControl"
    name: "GiftPostcardForm"
    size: [1400.000000, 900.000000]
    input: false
    components:
        LinearLayout:
            orientation: "TopDown"
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
        UILayoutEventComponent:
            sizeChangedEvent: "ScreenSizeChanged"
            sizeChangedEventData: "int(_size.Y)"
        ModalInput: {}
        UIVirtualActionEventComponent0:
            virtualKeyAction: "Escape"
            keyDownEvent: "BackEvent"
        UIShortcutEventComponent:
            shortcuts: "BackEvent,Escape;BackEvent,Back"
        UIDataParamsComponent:
            params:
            - ["bool", "wasPushed", "true", "true"]
            - ["bool", "chatEnabled", "true", "true"]
            - ["bool", "showInfoButton", "true", "true"]
            - ["bool", "forceGfx2", "false", "false"]
            - ["bool", "showProductInfo", "true", "true"]
            - ["ShopProduct", "product", "null", "{ }"]
            - ["bool", "nintendoSwitch", "false", "true"]
            - ["string", "taxMessage", "\"\"", "\"All taxes\""]
            - ["SessionDataModel", "session", "null", "{ }"]
            - ["GiftPostcardViewModel", "model", "null", "{ }"]
            events:
            - "BACK_EVENT"
            - "ON_BUY_CLICKED"
            - "ON_INFO_CLICKED"
            - "ON_RECIEVER_CHANGED"
            - "MESSAGE_CHANGED"
        UIDataLocalVarsComponent:
            data:
            - ["int", "overlayW", "0"]
            - ["int", "screenH", "0"]
            - ["int", "defaultH", "500"]
            - ["int", "stuffH", "0"]
            - ["int", "footerH", "122"]
            - ["eGiftPostcardField", "currentField", "eGiftPostcardField.Reciever"]
            - ["string", "itemsLeftKey", "\"Gifts/PostcardForm/ItemsLeft\""]
        UIDataLocalBindingsComponent:
            data:
            - ["int", "overallH", "when stuffH > defaultH -> int(defaultH * 1.200000), defaultH"]
            - ["int", "giftsLeft", "when not isNull(product) and product.giftable -> product.giftAvailableTimes, 0"]
            - ["string", "highlightStartRichAlias", "\"<t-body_highlighted>\""]
            - ["string", "highlightEndRichAlias", "\"</t-body_highlighted>\""]
            - ["string", "finalString", "localize(itemsLeftKey, { \"highlight_start\" = highlightStartRichAlias; \"highlight_end\" = highlightEndRichAlias; \"number\" = giftsLeft; })"]
            - ["bool", "buyButtonEnabled", "not isNull(product) and not product.pendingPurchase and not isNull(model.giftData.receiver) and giftsLeft > 0"]
            - ["bool", "realCurrencyBundle", "not isNull(product) and not product.salePrice.resources.Empty() and product.paymentType == eShopPaymentType.EXTERNAL"]
            - ["eResourceLoadingStrategy", "resolution", "when forceGfx2 -> eResourceLoadingStrategy.PreferMaxResolution, eResourceLoadingStrategy.PreferDesired"]
        UIActionComponent:
            actionsPath: "~res:/UI/Screens3/Lobby/Gifts/GiftPostcardForm.actions"
        UIDataOnEventComponent0:
            eventName: "FooterSizeChanged"
            modelFieldExpression: "footerH"
            dataExpression: "_event"
        UIDataOnEventComponent1:
            eventName: "ScreenSizeChanged"
            modelFieldExpression: "screenH"
            dataExpression: "_event"
        UIDataOnEventComponent2:
            eventName: "OVERLAY_WIDTH_CHANGED"
            modelFieldExpression: "overlayW"
            dataExpression: "_event"
    children:
    -   class: "UIControl"
        name: "Overlay"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
            UIChildComponent0:
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Overlay/OverlayBasic.yaml"
                args:
                    "backContent": "CustomBg"
                    "scaleBg": "false"
                    "footerHeight": "footerH"
                    "alighBgCenter": "false"
                    "closeButtonIcon": "\"~res:/Gfx/Lobby/icons/icon_arrow-back\""
                    "isFooterVisible": "true"
                    "footerContent": "Footer"
                    "wasPushed": "wasPushed"
                    "contentHeight": "overallH"
                    "rightCornerContent": "when showInfoButton -> InfoButtonHolder, null"
                    "titleContent": "Title"
                    "hasCustomBg": "true"
                    "content": "ContentWrapper"
                eventActions:
                - ["SHIFT_D", "TOGGLE_DEBUG", ""]
                - ["OVERLAY_WIDTH_CHANGED", "OVERLAY_WIDTH_CHANGED", "_event"]
                - ["EXTRA2_ACTION", "MainActionRequested", ""]
                - ["BACK_EVENT", "BACK_EVENT", ""]
    -   class: "UIControl"
        name: "Loading"
        input: true
        exclusiveInput: true
        components:
            IgnoreLayout: {}
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
            ModalInput: {}
            UIChildComponent0:
                condition: "model.purchaseInProgress"
                prototypePath: "~res:/UI/Screens3/Common/LoadingOverlay.yaml"
        bindings:
        - ["visible", "model.purchaseInProgress"]
    -   class: "UIControl"
        name: "NavigationPanel"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                condition: "isGamepad"
                prototypePath: "~res:/UI/Screens3/Common/NintendoSwitch/NavigationPanel/NavigationPanel.yaml"
                args:
                    "content": "NavigationPanel"
Slots:
-   class: "UIControl"
    name: "RichText"
    size: [278.000000, 72.000000]
    input: false
    components:
        RichContent:
            baseClasses: "t-body regular white-wild-sand-50-text"
        RichContentAliases0:
            aliases:
            - ["t-body_highlighted", "<span class=\"t-body regular white-wild-sand-text\" />"]
        SizePolicy:
            horizontalPolicy: "PercentOfChildrenSum"
            verticalPolicy: "PercentOfMaxChild"
        FlowLayout:
            hSpacing: 5.000000
            useRtl: true
        StyleSheet:
            styles: "~res:/UI/Screens3/Font.style.yaml"
    bindings:
    - ["RichContent.text", "finalString"]
-   class: "UIControl"
    name: "Friends"
    size: [260.000000, 100.000000]
    input: false
    classes: "grey-shark-70-bg"
    components:
        Background: {}
        UIRoundedCornersComponent:
            radius: "8"
        SizePolicy:
            horizontalPolicy: "FixedSize"
            horizontalValue: 260.000000
            verticalPolicy: "Formula"
            verticalFormula: "when parent == 0 -> childrenSum, min(parent, childrenSum)"
        StyleSheet:
            styles: "~res:/UI/Screens3/Color.style.yaml"
    children:
    -   class: "UIControl"
        name: "Content"
        components:
            Anchor:
                hCenterAnchorEnabled: true
            LinearLayout:
                orientation: "TopDown"
                spacing: 8.000000
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "Formula"
                verticalFormula: "when parent == 0 -> childrenSum, min(parentRest, childrenSum)"
        children:
        -   class: "UIControl"
            name: "Spacer"
            size: [32.000000, 32.000000]
            input: false
            components:
                SizePolicy:
                    horizontalPolicy: "FixedSize"
                    horizontalValue: 0.000000
                    verticalPolicy: "FixedSize"
                    verticalValue: 16.000000
        -   class: "UIControl"
            name: "Title"
            input: false
            classes: "t-caps bold white-wild-sand-text"
            components:
                UITextComponent:
                    multiline: "MULTILINE_ENABLED"
                    align: ["LEFT", "VCENTER"]
                    useRtlAlign: "USE_BY_SYSTEM"
                Anchor:
                    leftAnchorEnabled: true
                    leftAnchor: 24.000000
                    rightAnchorEnabled: true
                    rightAnchor: 24.000000
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "PercentOfContent"
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml"
            bindings:
            - ["UITextComponent.text", "when not model.friends.Empty() -> capitalize(localize(\"Gifts/ChooseFriend\")), chatEnabled -> localize(\"Gifts/FriendsListEmpty\"), localize(\"Gifts/ChatError\")"]
        -   class: "UIScrollView"
            name: "ContentArea"
            autoUpdate: true
            components:
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "Formula"
                    verticalFormula: "when parent == 0 -> childrenSum, min(parentRest, childrenSum)"
            children:
            -   class: "UIScrollViewContainer"
                name: "scrollContainerControl"
                components:
                    LinearLayout:
                        orientation: "TopDown"
                    SizePolicy:
                        horizontalPolicy: "PercentOfParent"
                        verticalPolicy: "PercentOfChildrenSum"
                    UILayoutEventComponent:
                        sizeChangedEvent: "StuffSizeChanged"
                        sizeChangedEventData: "int(_size.Y)"
                    UIRepeatComponent:
                        control: "~res:/UI/Screens3/Lobby/Gifts/FriendsListItem.yaml"
                        dataContainer: "model.friends"
                        args:
                            "select": "not isNull(model.giftData.receiver) and _item.id == model.giftData.receiver.dbId"
                            "lastChild": "_index < model.friends.Size() - 1"
                            "player": "_item"
                        eventActions:
                        - ["ON_FRIEND_CLICKED", "ON_RECIEVER_CHANGED", "_event"]
                        loadingPolicy: "Lazy"
                        forceLoadControlCount: 50
                        loadingDistance: 100.000000
                        unloadingDistance: 200.000000
            -   prototype: "VerticalScrollBar/VerticalScrollBar"
                name: "VerticalScrollBar"
                position: [348.000000, 0.000000]
                components:
                    Anchor:
                        enabled: true
                        rightAnchorEnabled: true
                        rightAnchor: 2.000000
                        topAnchorEnabled: true
                        topAnchor: 8.000000
                        bottomAnchorEnabled: true
                        bottomAnchor: 8.000000
                    IgnoreLayout: {}
                    ScrollBarDelegate:
                        delegate: ".."
        -   class: "UIControl"
            name: "Spacer"
            size: [32.000000, 32.000000]
            input: false
            components:
                SizePolicy:
                    horizontalPolicy: "FixedSize"
                    horizontalValue: 0.000000
                    verticalPolicy: "FixedSize"
                    verticalValue: 8.000000
-   class: "UIControl"
    name: "Title"
    size: [32.000000, 32.000000]
    input: false
    components:
        Anchor:
            hCenterAnchorEnabled: true
            topAnchorEnabled: true
            topAnchor: 32.000000
        LinearLayout:
            orientation: "TopDown"
            spacing: 8.000000
        SizePolicy:
            horizontalPolicy: "PercentOfMaxChild"
            verticalPolicy: "PercentOfChildrenSum"
    children:
    -   class: "UIControl"
        name: "Title"
        input: false
        classes: "t-title light color=white-wild-sand-text"
        components:
            UITextComponent:
                text: "Gifts/PostcardForm/Title"
                colorInheritType: "COLOR_IGNORE_PARENT"
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfContent"
                verticalPolicy: "PercentOfContent"
            StyleSheet:
                styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
    -   class: "UIControl"
        name: "ItemsLeft"
        size: [32.000000, 32.000000]
        input: false
        components:
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfMaxChild"
                verticalPolicy: "PercentOfMaxChild"
            UIChildComponent0:
                childType: "kControl"
                condition: "showProductInfo"
                control: "RichText"
-   class: "UIControl"
    name: "InfoButtonHolder"
    input: false
    components:
        Anchor:
            rightAnchorEnabled: true
            rightAnchor: 16.000000
            topAnchorEnabled: true
            topAnchor: 16.000000
        SizePolicy:
            horizontalPolicy: "PercentOfMaxChild"
            verticalPolicy: "PercentOfMaxChild"
        UIChildComponent0:
            condition: "showInfoButton"
            prototypePath: "~res:/UI/Screens3/Lobby/Common/IconButton.yaml"
            args:
                "hasSound": "false"
                "type": "eButtonType.OPTIONAL_LIGHT"
                "image": "\"~res:/Gfx/Lobby/icons/icon_info_xs\""
                "isBgVisible": "false"
            eventActions:
            - ["ON_CLICK_BUTTON", "ON_INFO_CLICKED", ""]
-   class: "UIControl"
    name: "Footer"
    input: false
    components:
        Anchor:
            bottomAnchorEnabled: true
            bottomAnchor: 24.000000
        LinearLayout:
            orientation: "TopDown"
            spacing: 10.000000
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfChildrenSum"
        UILayoutEventComponent:
            sizeChangedEvent: "FooterSizeChanged"
            sizeChangedEventData: "int(_size.Y)"
    children:
    -   class: "UIControl"
        name: "TaxMessage"
        input: false
        classes: "t-caps regular white-wild-sand-50-text"
        components:
            UITextComponent:
                colorInheritType: "COLOR_IGNORE_PARENT"
                align: ["LEFT", "VCENTER"]
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfContent"
                verticalPolicy: "PercentOfContent"
            StyleSheet:
                styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
        bindings:
        - ["visible", "not empty(taxMessage) and realCurrencyBundle"]
        - ["UITextComponent.text", "taxMessage"]
    -   class: "UIControl"
        name: "PriceHolder"
        input: false
        components:
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfMaxChild"
                verticalPolicy: "PercentOfMaxChild"
            UIChildComponent0:
                condition: "not isNull(product) and showProductInfo"
                prototypePath: "~res:/UI/Screens3/Lobby/Shop/ShopItemPrice.yaml"
                args:
                    "artefacts": "session.artefacts"
                    "stats": "session.stats"
                    "product": "product"
    -   class: "UIControl"
        name: "ActionButtonHolder"
        input: false
        components:
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfMaxChild"
                verticalPolicy: "PercentOfMaxChild"
            UIChildComponent0:
                condition: "not isNull(product)"
                prototypePath: "~res:/UI/Screens3/Lobby/Shop/ShopProductButton.yaml"
                args:
                    "enabled": "buyButtonEnabled"
                    "count": "0"
                    "discount": "when showProductInfo -> product.discount, 0.000000"
                    "caption": "capitalize(localize(\"Gifts/Present\"))"
                eventActions:
                - ["ON_CLICK_BUTTON", "ON_BUY_CLICKED", ""]
-   class: "UIControl"
    name: "ContentWrapper"
    size: [946.000000, 481.000000]
    visible: true
    input: false
    components:
        LinearLayout:
            orientation: "TopDown"
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
    children:
    -   class: "UIControl"
        name: "Spacer"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "FixedSize"
                horizontalValue: 0.000000
                verticalPolicy: "FixedSize"
                verticalValue: 6.000000
    -   class: "UIControl"
        name: "Content"
        input: false
        components:
            LinearLayout:
                padding: "20"
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
        children:
        -   class: "UIControl"
            name: "CardWrapper"
            input: false
            components:
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "PercentOfParent"
            children:
            -   class: "UIControl"
                name: "Card"
                pivot: [0.500000, 0.500000]
                input: false
                components:
                    Anchor:
                        hCenterAnchorEnabled: true
                        vCenterAnchorEnabled: true
                    SizePolicy:
                        horizontalPolicy: "PercentOfMaxChild"
                        verticalPolicy: "PercentOfMaxChild"
                    ScalePolicy:
                        horizontalFormula: "when screenH < 740 -> 0.8, 1"
                        verticalFormula: "when screenH < 740 -> 0.8, 1"
                    UIChildComponent0:
                        prototypePath: "~res:/UI/Screens3/Lobby/Gifts/GiftPostcard.yaml"
                        args:
                            "currentField": "currentField"
                            "editable": "true"
                            "gift": "model.giftData"
                            "product": "product"
                        eventActions:
                        - ["ON_RECIEVER_CLICKED", "OnRecieverClicked", ""]
                        - ["ON_RECIEVER_REMOVED", "OnRemoveReciever", ""]
                bindings:
                - ["Anchor.hCenterAnchor", "when overlayW > 1000 -> 35, 0"]
        -   class: "UIControl"
            name: "FriendsList"
            input: false
            components:
                Anchor:
                    topAnchorEnabled: true
                    topAnchor: 25.000000
                    bottomAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfMaxChild"
                    verticalPolicy: "PercentOfParent"
                UIChildComponent0:
                    childType: "kControl"
                    condition: "currentField == eGiftPostcardField.Reciever"
                    control: "Friends"
-   class: "UIControl"
    name: "NavigationPanel"
    input: false
    components:
        LinearLayout:
            spacing: 24.000000
        SizePolicy:
            horizontalPolicy: "PercentOfChildrenSum"
            verticalPolicy: "PercentOfMaxChild"
    children:
    -   class: "UIControl"
        name: "Back"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfFirstChild"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                prototypePath: "~res:/UI/Screens3/Common/NintendoSwitch/NavigationPanel/IconWithLabel.yaml"
                args:
                    "text": "\"Switch/HubridPanel/Lobby/Back\""
                    "icon": "eNintendoSwitchControls.B"
-   class: "UIControl"
    name: "CustomBg"
    size: [752.000000, 449.000000]
    input: false
    classes: "grey-shark-90-bg"
    components:
        Background: {}
        ClipContent: {}
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
        StyleSheet:
            styles: "~res:/UI/Screens3/Color.style.yaml"
    children:
    -   class: "UIControl"
        name: "Background"
        pivot: [0.500000, 0.500000]
        input: false
        components:
            Background:
                drawType: "DRAW_SCALE_PROPORTIONAL_ONE"
                sprite: "~res:/Gfx/Lobby/backgrounds/present/bg_gift"
            UIOpacityComponent:
                opacity: 0.300000
            Anchor:
                hCenterAnchorEnabled: true
                vCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "FixedSize"
                horizontalValue: 1200.000000
                verticalPolicy: "PercentOfContent"
        bindings:
        - ["Background.spriteResource", "resolution"]
