Header:
    version: 125
Prototypes:
-   class: "UIControl"
    name: "StoryBoxWidget"
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfFirstChild"
            verticalPolicy: "PercentOfFirstChild"
        UIDataParamsComponent:
            params:
            - ["int64", "serverTime", "1561565973L", "1561565973L"]
            - ["Story", "story", "null", "{ }"]
            - ["int", "progressValue", "0", "50"]
            - ["int", "progressMax", "0", "100"]
            - ["string", "imagePath", "\"\"", "\"~res:/Gfx/Lobby/events/event_2020-halloween_button_grade1\""]
            - ["bool", "showFx", "false", "true"]
            - ["bool", "isReady", "false", "false"]
            - ["eBlitzDevice", "deviceType", "eBlitzDevice.DEVICE_DESKTOP", "eBlitzDevice.DEVICE_DESKTOP"]
            - ["control", "imageOverlay", "null", "null"]
            - ["control", "imageUnderlay", "null", "null"]
            - ["bool", "showProgress", "true", "true"]
            - ["bool", "showLevel", "false", "true"]
            - ["string", "masterId", "\"\"", "\"\""]
            events:
            - "ON_TOUCH"
        UIDataLocalBindingsComponent:
            data:
            - ["bool", "isProcessStage", "story.stage.type == eStageType.PROCESS"]
            - ["bool", "isBuyStage", "story.stage.type == eStageType.BUY"]
            - ["int64", "alertTime", "when isProcessStage or isBuyStage -> 3600L, 0L"]
            - ["int", "inProgressStepNetPrice", "when not isNull(story.inProgressStep) and story.inProgressStep.net.price.Contains(story.inProgressStep.price[0].stuff.name) -> story.inProgressStep.net.price[story.inProgressStep.price[0].stuff.name].stuff.quantity, 0"]
            - ["int", "inProgressStepGrossPrice", "when not isNull(story.inProgressStep) and story.inProgressStep.gross.price.Contains(story.inProgressStep.price[0].stuff.name) -> story.inProgressStep.gross.price[story.inProgressStep.price[0].stuff.name].stuff.quantity, 0"]
        UIEventOnDataComponent0:
            watchedDataExpression: "isReady"
            eventName: "START_ANIMATION"
            broadcast: true
    children:
    -   class: "UIControl"
        name: "StoryBoxHolder"
        pivot: [0.500000, 1.000000]
        input: false
        components:
            UIAnimationComponent:
                animations: "_INIT,~res:/UI/Screens3/Lobby/Hangar/Story/StoryButtonReady.animation;START_ANIMATION,~res:/UI/Screens3/Lobby/Hangar/Story/StoryButtonReady.animation"
            Anchor:
                hCenterAnchorEnabled: true
                bottomAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfFirstChild"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                prototypePath: "~res:/UI/Screens3/Lobby/Hangar/Story/StoryButton.yaml"
                args:
                    "serverTime": "serverTime"
                    "imagePath": "imagePath"
                    "isReady": "isReady"
                    "alertTime": "alertTime"
                    "finishTime": "story.finishTime"
                    "maximum": "progressMax"
                    "value": "progressValue"
                    "timerIcon": "when story.stage.type == eStageType.PROCESS -> \"~res:/Gfx/Lobby/icons/icon_battles_xs\", story.stage.type == eStageType.BUY -> \"~res:/Gfx/Lobby/icons/icon_coin_s\", story.stage.type == eStageType.INFORM -> \"~res:/Gfx/Lobby/icons/icon_info_xs\", \"\""
                    "deviceType": "deviceType"
                    "imageOverlay": "imageOverlay"
                    "imageUnderlay": "when not showFx -> null, isNull(imageUnderlay) -> FxWrapper, imageUnderlay"
                    "showProgress": "showProgress and story.stage.type == eStageType.PROCESS and not story.isDone"
                    "masterId": "masterId"
                    "hasInput": "not story.isFinished"
                eventActions:
                - ["ON_TOUCH", "ON_TOUCH", ""]
Slots:
-   class: "UIControl"
    name: "FxWrapper"
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
    children:
    -   class: "UIParticles"
        name: "Fx"
        pivot: [0.500000, 0.500000]
        input: false
        effectPath: "~res:/3d/FX/UI/ClaimFx/ClaimFx.sc2"
        autoStart: true
        components:
            Anchor:
                hCenterAnchorEnabled: true
                vCenterAnchorEnabled: true
