Header:
    version: 138
ImportedPackages:
- "~res:/UI/Screens3/Lobby/Common/Timer.yaml"
Prototypes:
-   class: "UIControl"
    name: "LimitedTimeOffer"
    classes: "button-open-sound"
    components:
        UIAnimationComponent:
            animations: "_INIT,~res:/UI/Screens3/Lobby/Hangar/Offers/PRMP/LimitedTimeOfferInitialization.animation;FORCE_UPDATE,~res:/UI/Screens3/Lobby/Hangar/Offers/PRMP/LimitedTimeOfferInitialization.animation"
        SizePolicy:
            horizontalPolicy: "FixedSize"
            verticalPolicy: "FixedSize"
            verticalValue: 72.000000
        UIInputEventComponent:
            onTouchUpInside: "ON_OFFER_CLICK"
        UIDataParamsComponent:
            params:
            - ["PrmpOffer", "offer", "null", "{ \"basicOffer\" = { \"piggyBank\" = { \"previousQuantity\" = 2000; \"stagedQuantity\" = 2500; }; }; }"]
            - ["int64", "serverTime", "0L", "1000L"]
            - ["int", "index", "0", "0"]
            - ["int", "currentOfferIndex", "0", "0"]
            - ["int", "nextOfferIndex", "0", "0"]
            - ["bool", "debugMode", "false", "true"]
            events:
            - "START_FULL_PIGGY_EFFECTS"
            - "STOP_FULL_PIGGY_EFFECTS"
            - "SHOW_PIGGY_FILL_EFFECT(ResourceType type)"
            - "PIGGY_BANK_STAGE_PROGRESS(int stuffDescr)"
            - "PIGGY_BANK_SAVE_PROGRESS(int stuffDescr)"
            - "ROTATION_FINISHED"
            - "ON_OFFER_CLICK"
        UIDataLocalVarsComponent:
            data:
            - ["int", "width", "212"]
            - ["bool", "rotating", "false"]
            - ["bool", "progressing", "false"]
            - ["bool", "fullPiggyEffectsShown", "false"]
            - ["float", "offerDisplayTime", "10.000000"]
            - ["float", "progressAnimationTime", "2.000000"]
        UIDataLocalBindingsComponent:
            data:
            - ["bool", "piggyBankOffer", "not isNull(offer.basicOffer) and not isNull(offer.basicOffer.piggyBank)"]
            - ["bool", "fullPiggyBank", "piggyBankOffer and offer.basicOffer.piggyBank.current.quantity >= offer.basicOffer.piggyBank.max.quantity"]
            - ["bool", "progressAnimationNeeded", "piggyBankOffer and not rotating and not progressing and currentOfferIndex == index and offer.basicOffer.piggyBank.previousQuantity < offer.basicOffer.piggyBank.current.quantity"]
            - ["int", "currentQuantity", "when piggyBankOffer -> offer.basicOffer.piggyBank.current.quantity, 0"]
        UIActionComponent:
            actionsPath: "~res:/UI/Screens3/Lobby/Hangar/Offers/PRMP/LimitedTimeOffer.actions"
        UIDataOnEventComponent0:
            eventName: "START_FULL_PIGGY_EFFECTS"
            modelFieldExpression: "fullPiggyEffectsShown"
            dataExpression: "true"
        UIEventOnDataComponent0:
            watchedDataExpression: "currentOfferIndex"
            eventName: "OfferRotation"
            eventData: "true"
        UIEventOnDataComponent1:
            watchedDataExpression: "progressing"
            eventName: "PROGRESSING_FLAG_SWITCHED"
        UIEventOnDataComponent2:
            watchedDataExpression: "rotating"
            eventName: "ROTATING_FLAG_SWITCHED"
        UIEventOnDataComponent3:
            watchedDataExpression: "currentQuantity"
            ifExpression: "progressAnimationNeeded"
            eventName: "AnimateProgress"
        UIEventOnDataComponent4:
            watchedDataExpression: "rotating"
            ifExpression: "progressAnimationNeeded"
            eventName: "AnimateProgress"
        UIEventOnDataComponent5:
            watchedDataExpression: "progressing"
            ifExpression: "progressAnimationNeeded"
            eventName: "AnimateProgress"
        Sound: {}
        StyleSheet:
            styles: "~res:/UI/Screens3/ButtonSound.style.yaml"
    bindings:
    - ["SizePolicy.horizontalValue", "width"]
    children:
    -   class: "UIControl"
        name: "OfferIcon"
        input: false
        components:
            Background:
                drawType: "DRAW_SCALE_TO_RECT"
            UIUrlImageComponent:
                placeholderScenePath: "~res:/UI/Screens3/Common/FillingLoadingSpinner.yaml"
                placeholderControlName: "FillingLoadingSpinner"
            Anchor:
                leftAnchorEnabled: true
                rightAnchorEnabled: true
                topAnchorEnabled: true
                bottomAnchorEnabled: true
        bindings:
        - ["UIUrlImageComponent.imageUrl", "offer.iconUrl"]
    -   class: "UIControl"
        name: "Content"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
            UIChildComponent0:
                childType: "kControl"
                condition: "not isNull(offer.basicOffer) and not isNull(offer.basicOffer.piggyBank)"
                control: "PiggyBankOffer"
            UIChildComponent1:
                childType: "kControl"
                control: "DefaultOffer"
    -   class: "UIControl"
        name: "DebugInfo"
        input: false
        components:
            Anchor:
                rightAnchorEnabled: true
                rightAnchor: 4.000000
                topAnchorEnabled: true
                topAnchor: 4.000000
            SizePolicy:
                horizontalPolicy: "PercentOfFirstChild"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                childType: "kControl"
                condition: "debugMode"
                control: "DebugInfo"
Slots:
-   class: "UIControl"
    name: "PiggyBankOffer"
    size: [212.000000, 71.000000]
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
    children:
    -   class: "UIControl"
        name: "ProgressImageUrl"
        input: false
        components:
            Background:
                drawType: "DRAW_SCALE_TO_RECT"
            UIUrlImageComponent:
                placeholderScenePath: "~res:/UI/Screens3/Common/FillingLoadingSpinner.yaml"
                placeholderControlName: "FillingLoadingSpinner"
                upscaleForHighResolution: true
            IgnoreLayout: {}
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
        bindings:
        - ["UIUrlImageComponent.imageUrl", "offer.basicOffer.progressHangarImageUrl"]
    -   class: "UIControl"
        name: "Status"
        input: false
        components:
            UIOpacityComponent:
                opacity: 0.000000
            Anchor:
                leftAnchorEnabled: true
                leftAnchor: 8.000000
                rightAnchorEnabled: true
                rightAnchor: 8.000000
                topAnchorEnabled: true
                topAnchor: 8.000000
            LinearLayout:
                orientation: "TopDown"
            SizePolicy:
                verticalPolicy: "PercentOfChildrenSum"
        children:
        -   class: "UIControl"
            name: "Title"
            input: false
            classes: "t-body bold color=white-wild-sand-text"
            components:
                UITextComponent:
                    colorInheritType: "COLOR_IGNORE_PARENT"
                    align: ["LEFT", "VCENTER"]
                SizePolicy:
                    horizontalPolicy: "PercentOfContent"
                    verticalPolicy: "PercentOfContent"
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
            bindings:
            - ["UITextComponent.text", "offer.shortTitle"]
        -   class: "UIControl"
            name: "Progress"
            input: false
            components:
                LinearLayout: {}
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "PercentOfMaxChild"
            children:
            -   class: "UIControl"
                name: "CurrentProgress"
                input: false
                components:
                    SizePolicy:
                        horizontalPolicy: "PercentOfFirstChild"
                        verticalPolicy: "PercentOfFirstChild"
                    UIChildComponent0:
                        prototypePath: "~res:/UI/Screens3/Lobby/Hangar/Offers/PRMP/AnimatedNumber/AnimatedNumber.yaml"
                        args:
                            "animationTime": "progressAnimationTime"
                            "initialNumber": "offer.basicOffer.piggyBank.previousQuantity"
                            "targetNumber": "offer.basicOffer.piggyBank.stagedQuantity"
                            "textStyle": "\"t-caption bold white-wild-sand-text\""
                        eventActions:
                        - ["NUMBER_ANIMATION_FINISHED", "NUMBER_ANIMATION_FINISHED", ""]
            -   class: "UIControl"
                name: "Delimeter"
                input: false
                classes: "t-caption bold color=white-wild-sand-text"
                components:
                    UITextComponent:
                        text: " / "
                        colorInheritType: "COLOR_IGNORE_PARENT"
                        align: ["LEFT", "VCENTER"]
                    SizePolicy:
                        horizontalPolicy: "PercentOfContent"
                        verticalPolicy: "PercentOfContent"
                    StyleSheet:
                        styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
            -   class: "UIControl"
                name: "MaxValue"
                input: false
                classes: "t-caption bold color=white-wild-sand-text"
                components:
                    UITextComponent:
                        colorInheritType: "COLOR_IGNORE_PARENT"
                        align: ["LEFT", "VCENTER"]
                    SizePolicy:
                        horizontalPolicy: "PercentOfContent"
                        verticalPolicy: "PercentOfContent"
                    StyleSheet:
                        styles: "~res:/UI/Screens3/Font.style.yaml;~res:/UI/Screens3/Color.style.yaml"
                bindings:
                - ["UITextComponent.text", "shortStr(offer.basicOffer.piggyBank.max.quantity, 1000)"]
    -   class: "UIControl"
        name: "Footer"
        input: false
        classes: "black-50-bg"
        components:
            Background: {}
            Anchor:
                bottomAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "FixedSize"
                verticalValue: 24.000000
            StyleSheet:
                styles: "~res:/UI/Screens3/Color.style.yaml"
        children:
        -   prototype: "Timer/Timer"
            name: "Timer"
            components:
                Anchor:
                    leftAnchorEnabled: true
                    leftAnchor: 8.000000
                UIDataParamsComponent:
                    args:
                        "visible": "true"
                        "serverTime": "serverTime"
                        "time": "offer.arrivalTime + offer.lifeTime"
                        "bgVisible": "false"
                        "iconVisible": "true"
                        "alertTime": "300L"
-   class: "UIControl"
    name: "DefaultOffer"
    size: [212.000000, 72.000000]
    input: false
    components:
        LinearLayout:
            orientation: "TopDown"
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
    children:
    -   class: "UIControl"
        name: "Status"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "PercentOfParent"
        children:
        -   class: "UIControl"
            name: "Title"
            input: false
            classes: "t-body bold color=white-wild-sand-text"
            components:
                UITextComponent:
                    colorInheritType: "COLOR_IGNORE_PARENT"
                    multiline: "MULTILINE_ENABLED"
                    fitting: "FITTING_REDUCE"
                    align: ["LEFT", "VCENTER"]
                Anchor:
                    leftAnchorEnabled: true
                    leftAnchor: 8.000000
                    topAnchorEnabled: true
                    topAnchor: 8.000000
                    bottomAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "FixedSize"
                    horizontalValue: 110.000000
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml"
            bindings:
            - ["UITextComponent.text", "offer.shortTitle"]
    -   class: "UIControl"
        name: "Footer"
        input: false
        classes: "black-50-bg"
        components:
            Background: {}
            SizePolicy:
                horizontalPolicy: "PercentOfParent"
                verticalPolicy: "FixedSize"
                verticalValue: 24.000000
            StyleSheet:
                styles: "~res:/UI/Screens3/Color.style.yaml"
        children:
        -   prototype: "Timer/Timer"
            name: "Timer"
            components:
                Anchor:
                    leftAnchorEnabled: true
                    leftAnchor: 8.000000
                UIDataParamsComponent:
                    args:
                        "visible": "true"
                        "serverTime": "serverTime"
                        "time": "offer.arrivalTime + offer.lifeTime"
                        "bgVisible": "false"
                        "iconVisible": "true"
                        "alertTime": "300L"
-   class: "UIControl"
    name: "DebugInfo"
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfLastChild"
            verticalPolicy: "PercentOfLastChild"
    children:
    -   class: "UIControl"
        name: "Bg"
        input: false
        classes: "grey-shark-bg"
        components:
            Background: {}
            Anchor:
                hCenterAnchorEnabled: true
                vCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "Formula"
                horizontalFormula: "parent + 8"
                verticalPolicy: "PercentOfParent"
            StyleSheet:
                styles: "~res:/UI/Screens3/Color.style.yaml"
    -   class: "UIControl"
        name: "Index"
        input: false
        classes: "t-subtitle bold white-wild-sand-text"
        components:
            UITextComponent: {}
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfContent"
                verticalPolicy: "PercentOfContent"
            StyleSheet:
                styles: "~res:/UI/Screens3/Font.style.yaml"
        bindings:
        - ["UITextComponent.text", "str(index)"]
