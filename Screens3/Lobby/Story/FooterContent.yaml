Header:
    version: 140
Prototypes:
-   class: "UIControl"
    name: "FooterContent"
    input: false
    components:
        LinearLayout:
            spacing: 16.000000
        SizePolicy:
            horizontalPolicy: "PercentOfChildrenSum"
            verticalPolicy: "PercentOfMaxChild"
        UIDataParamsComponent:
            params:
            - ["Story", "story", "null", "{ }"]
            - ["StatsDataModel", "statsData", "null", "{ }"]
            - ["StoryBattlePass", "battlePass", "null", "{ }"]
            - ["StoryStepModel", "selectedStep", "null", "{ }"]
            events:
            - "BUY_QUEST_BOOSTER"
            - "BUY_GOLD_STEP"
            - "OPEN_BATTLEPASS"
            - "ON_LOCKED_BUTTON_PRESSED"
            - "ON_COMPLETE_BUTTON_PRESSED(bool isChest)"
        UIDataLocalBindingsComponent:
            data:
            - ["bool", "isStepReadyToComplete", "when not isNull(selectedStep) -> selectedStep.net.price.Empty() and not selectedStep.isFinished, false"]
            - ["bool", "isStepForGold", "not isNull(selectedStep) and story.tree.stepsForGold.Contains(selectedStep.id)"]
            - ["bool", "isStepForFreeXp", "not isNull(selectedStep) and selectedStep.compositeName == \"freeXp\""]
            - ["bool", "isFreeStep", "not isNull(selectedStep) and (not isNull(selectedStep.price[0].stuff) and selectedStep.price[0].stuff.quantity == 0 or not isNull(selectedStep.price[0].basic) and selectedStep.price[0].basic.quantity == 0)"]
            - ["bool", "showContent", "true"]
            - ["string", "completeButtonLabel", "when not isStepReadyToComplete or isStepForGold -> \"#common:DialogButton/Buy\", \"#common:Button/Claim\""]
            - ["string", "buyoutLabel", "when story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line2\", story.stage.type == eStageType.BUY -> \"#common:Cost\", \"\""]
            - ["bool", "isEnoughCurrencyForOneStep", "isStepReadyToComplete and selectedStep.net.unlockPath.Size() == 1"]
            - ["bool", "isEnoughCurrencyForSomeStep", "isStepReadyToComplete and selectedStep.net.unlockPath.Size() > 1"]
            - ["string", "costLabelBuy", "when not isNull(selectedStep) and selectedStep.net.price.Size() == 1 -> \"template_event/ProgressStage/LackingCurrency\", not isNull(selectedStep) and selectedStep.net.price.Size() > 1 -> \"template_event/ProgressStage/LackingCurrencies\", \"\""]
            - ["string", "costLabelNotEnough", "when story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line1\", story.stage.type == eStageType.BUY -> costLabelBuy, \"\""]
            - ["string", "costLabel", "when not isNull(selectedStep) and not isStepReadyToComplete -> costLabelNotEnough, \"\""]
            - ["string", "buyLabel", "when story.stage.type == eStageType.BUY -> \"#common:Cost\", story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line2\", \"\""]
            - ["string", "stepDescriptionLabel", "\"\""]
            - ["bool", "isRequiredProxyForBuyout", "not isNull(selectedStep) and selectedStep.canBuy and not selectedStep.requiredProxyForBuyout.Empty()"]
            - ["bool", "isLeftProxyForBuyout", "not isNull(selectedStep) and selectedStep.canBuy and not selectedStep.leftProxyForBuyout.Empty()"]
            - ["bool", "showBuyout", "when not isNull(selectedStep) -> selectedStep.net.buyout.type != ResourceType.undefined and empty(stepDescriptionLabel) and not isLeftProxyForBuyout, false"]
            - ["bool", "isButtonEnabled", "when not isNull(selectedStep) -> (selectedStep.canBuy and not isLeftProxyForBuyout) or isStepReadyToComplete, false"]
            - ["bool", "isQuestBooster", "selectedStep.groupName == \"questBoosters\""]
    children:
    -   class: "UIControl"
        name: "ContentHolder"
        input: false
        components:
            Anchor:
                vCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfFirstChild"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                childType: "kControl"
                condition: "isQuestBooster"
                control: "QuestBoosterContent"
            UIChildComponent1:
                childType: "kControl"
                condition: "not isQuestBooster"
                control: "Content"
        bindings:
        - ["visible", "showContent"]
    -   class: "UIControl"
        name: "CompleteButton"
        input: false
        components:
            Anchor:
                vCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfMaxChild"
                verticalPolicy: "PercentOfMaxChild"
            UIAttachLayoutMasterComponent:
                attachId: "STORY_FOOTER_MAIN_BUTTON"
            UIChildComponent0:
                condition: "battlePass.isRequired and battlePass.isSelected"
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "\"#common:DialogButton/Buy\""
                    "sound": "when not isNull(battlePass.price.realCurrency) -> eButtonSound.OK, eButtonSound.OPEN"
                    "enabled": "true"
                eventActions:
                - ["ON_CLICK_BUTTON", "OPEN_BATTLEPASS", ""]
            UIChildComponent1:
                condition: "story.name == \"BLACK2021\" and not isNull(selectedStep) and not isStepReadyToComplete"
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "\"#common:DialogButton/Buy\""
                    "sound": "eButtonSound.OK"
                    "enabled": "true"
                eventActions:
                - ["ON_CLICK_BUTTON", "TO_STORE_DIALOG", ""]
            UIChildComponent2:
                condition: "isStepForFreeXp"
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "when isFreeStep or (isRequiredProxyForBuyout and not isLeftProxyForBuyout) -> \"#common:Button/Claim\", \"#common:DialogButton/Buy\""
                    "sound": "eButtonSound.OPEN"
                    "enabled": "isButtonEnabled"
                eventActions:
                - ["ON_CLICK_BUTTON", "ON_COMPLETE_BUTTON_PRESSED", "true"]
            UIChildComponent3:
                condition: "selectedStep.groupName == \"roll\""
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "\"ny2020_event/Button/ShakeSnowBall\""
                    "sound": "eButtonSound.OPEN"
                    "enabled": "isButtonEnabled"
                eventActions:
                - ["ON_CLICK_BUTTON", "ON_COMPLETE_BUTTON_PRESSED", "true"]
            UIChildComponent4:
                condition: "isStepForGold"
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "\"#common:DialogButton/Buy\""
                    "sound": "eButtonSound.OK"
                    "enabled": "true"
                eventActions:
                - ["ON_CLICK_BUTTON", "BUY_GOLD_STEP", ""]
            UIChildComponent5:
                condition: "isQuestBooster"
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "completeButtonLabel"
                    "sound": "eButtonSound.OK"
                    "enabled": "isButtonEnabled"
                eventActions:
                - ["ON_CLICK_BUTTON", "BUY_QUEST_BOOSTER", ""]
            UIChildComponent6:
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Button.yaml"
                args:
                    "caption": "completeButtonLabel"
                    "sound": "eButtonSound.OK"
                    "enabled": "isButtonEnabled"
                eventActions:
                - ["ON_CLICK_BUTTON", "ON_COMPLETE_BUTTON_PRESSED", "false"]
        children:
        -   class: "UIControl"
            name: "LockedTapArea"
            size: [32.000000, 32.000000]
            classes: "button-open-sound"
            components:
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "PercentOfParent"
                UIInputEventComponent:
                    onTouchUpInside: "ON_LOCKED_BUTTON_PRESSED"
                Sound: {}
                StyleSheet:
                    styles: "~res:/UI/Screens3/ButtonSound.style.yaml"
            bindings:
            - ["visible", "isLeftProxyForBuyout"]
            - ["input", "isLeftProxyForBuyout"]
Slots:
-   class: "UIControl"
    name: "Content"
    input: false
    components:
        LinearLayout:
            orientation: "TopDown"
            spacing: 4.000000
        SizePolicy:
            horizontalPolicy: "PercentOfMaxChild"
            verticalPolicy: "PercentOfChildrenSum"
    bindings:
    - ["visible", "showContent"]
    children:
    -   class: "UIControl"
        name: "Cost"
        input: false
        components:
            Anchor:
                rightAnchorEnabled: true
            LinearLayout:
                spacing: 4.000000
                useRtl: true
            SizePolicy:
                horizontalPolicy: "PercentOfChildrenSum"
                verticalPolicy: "PercentOfMaxChild"
        children:
        -   class: "UIControl"
            name: "Label"
            input: false
            classes: "t-body regular white-wild-sand-50-text"
            components:
                UITextComponent: {}
                Anchor:
                    rightAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfContent"
                    verticalPolicy: "PercentOfContent"
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml"
            bindings:
            - ["UITextComponent.text", "localize(costLabel)"]
        -   class: "UIControl"
            name: "PriceWrapper"
            input: false
            components:
                Anchor:
                    rightAnchorEnabled: true
                LinearLayout: {}
                SizePolicy:
                    horizontalPolicy: "PercentOfChildrenSum"
                    verticalPolicy: "PercentOfMaxChild"
            children:
            -   class: "UIControl"
                name: "Price"
                input: false
                components:
                    LinearLayout:
                        spacing: 4.000000
                    SizePolicy:
                        horizontalPolicy: "PercentOfChildrenSum"
                        verticalPolicy: "PercentOfFirstChild"
                    UIRepeatComponent:
                        control: "~res:/UI/Screens3/Lobby/Common/Resource/CurrencyAdapter.yaml"
                        dataContainer: "when isNull(selectedStep) -> null, isStepReadyToComplete -> selectedStep.price, selectedStep.net.price"
                        args:
                            "currencySize": "eCurrencySize.BODY"
                            "canAfford": "when isLeftProxyForBuyout -> false, isStepReadyToComplete and _item.type == ResourceType.gold -> _item.basic.quantity <= statsData.gold.quantity, isStepReadyToComplete and _item.type == ResourceType.credits -> _item.basic.quantity <= statsData.credits.quantity, isStepReadyToComplete -> true, _item.type == ResourceType.stuff -> _item.stuff.quantity <= 0, _item.basic.quantity <= 0"
                            "resource": "_item"
                            "forceFullValue": "true"
                bindings:
                - ["visible", "not battlePass.isRequired or not battlePass.isSelected"]
            -   class: "UIControl"
                name: "BattlePassPrice"
                input: false
                components:
                    SizePolicy:
                        horizontalPolicy: "PercentOfFirstChild"
                        verticalPolicy: "PercentOfFirstChild"
                    UIChildComponent0:
                        condition: "battlePass.isRequired"
                        prototypePath: "~res:/UI/Screens3/Lobby/Common/Resource/CurrencyAdapter.yaml"
                        args:
                            "currencySize": "eCurrencySize.BODY"
                            "canAfford": "true"
                            "resource": "battlePass.price"
                bindings:
                - ["visible", "battlePass.isRequired and battlePass.isSelected"]
    -   class: "UIControl"
        name: "Buyout"
        input: false
        components:
            Anchor:
                rightAnchorEnabled: true
            LinearLayout:
                spacing: 4.000000
                useRtl: true
            SizePolicy:
                horizontalPolicy: "PercentOfChildrenSum"
                verticalPolicy: "PercentOfMaxChild"
        children:
        -   class: "UIControl"
            name: "Label"
            input: false
            classes: "t-body regular white-wild-sand-50-text"
            components:
                UITextComponent: {}
                Anchor:
                    rightAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfContent"
                    verticalPolicy: "PercentOfContent"
                StyleSheet:
                    styles: "~res:/UI/Screens3/Font.style.yaml"
            bindings:
            - ["visible", "showBuyout"]
            - ["UITextComponent.text", "localize(buyoutLabel)"]
        -   class: "UIControl"
            name: "Price"
            input: false
            components:
                Anchor:
                    rightAnchorEnabled: true
                SizePolicy:
                    horizontalPolicy: "PercentOfFirstChild"
                    verticalPolicy: "PercentOfFirstChild"
                UIChildComponent0:
                    prototypePath: "~res:/UI/Screens3/Lobby/Common/Resource/CurrencyAdapter.yaml"
                    args:
                        "currencySize": "eCurrencySize.BODY"
                        "canAfford": "when not isNull(selectedStep) and not isNull(selectedStep.net.buyout.basic) and not isNull(statsData.gold) -> statsData.gold.quantity >= selectedStep.net.buyout.basic.quantity, false"
                        "resource": "when not isNull(selectedStep) -> selectedStep.net.buyout, null"
                        "forceFullValue": "true"
            bindings:
            - ["visible", "showBuyout"]
    -   class: "UIControl"
        name: "StepDescriptionLabel"
        input: false
        classes: "t-body regular white-wild-sand-text"
        components:
            UITextComponent: {}
            Anchor:
                rightAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "PercentOfContent"
                verticalPolicy: "PercentOfContent"
            StyleSheet:
                styles: "~res:/UI/Screens3/Font.style.yaml"
        bindings:
        - ["visible", "not empty(stepDescriptionLabel)"]
        - ["UITextComponent.text", "localize(stepDescriptionLabel)"]
-   class: "UIControl"
    name: "QuestBoosterContent"
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfFirstChild"
            verticalPolicy: "PercentOfFirstChild"
    bindings:
    - ["visible", "showContent"]
    children:
    -   class: "UIControl"
        name: "BuyoutPrice"
        input: false
        components:
            SizePolicy:
                horizontalPolicy: "PercentOfFirstChild"
                verticalPolicy: "PercentOfFirstChild"
            UIChildComponent0:
                prototypePath: "~res:/UI/Screens3/Lobby/Common/Resource/CurrencyAdapter.yaml"
                args:
                    "currencySize": "eCurrencySize.BODY"
                    "canAfford": "when not isNull(selectedStep) and not isNull(selectedStep.net.buyout.basic) and not isNull(statsData.gold) -> statsData.gold.quantity >= selectedStep.net.buyout.basic.quantity, false"
                    "resource": "when not isNull(selectedStep) -> selectedStep.net.buyout, null"
                    "forceFullValue": "true"
