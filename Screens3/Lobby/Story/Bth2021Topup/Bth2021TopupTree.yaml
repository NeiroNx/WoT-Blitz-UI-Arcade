Header:
    version: 128
ImportedPackages:
- "~res:/UI/Screens3/Lobby/Common/BlurDynamic.yaml"
Prototypes:
-   class: "UIControl"
    name: "Bth2021TopupTree"
    size: [960.000000, 448.000000]
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfParent"
            verticalPolicy: "PercentOfParent"
        UILayoutEventComponent:
            sizeChangedEvent: "SCREEN_SIZE_CHANGED"
            sizeChangedEventData: "_size"
        UIDataParamsComponent:
            params:
            - ["eBlitzDevice", "deviceType", "eBlitzDevice.DEVICE_PHONE", "eBlitzDevice.DEVICE_PHONE"]
            - ["StoryView", "storyView", "null", "{ }"]
            events:
            - "DESELECT"
            - "SHOW_STEP_INFO(int id)"
            - "SELECT_STEP(int id)"
        UIDataLocalVarsComponent:
            data:
            - ["vector2", "screenSize", "vec2(0.000000, 0.000000)"]
            - ["vector<int>", "order", "[ 5; 1; 6; 2; 3; 7; 4; 8; ]"]
            - ["int", "stepIndex", "0"]
        UIDataLocalBindingsComponent:
            data:
            - ["int", "columnCount", "when screenSize.X < 1440 -> 3, 4"]
            - ["int", "rowCount", "when screenSize.X < 1440 -> 4, 3"]
        UIActionComponent:
            actionsPath: "~res:/UI/Screens3/Lobby/Story/Bth2021Topup/Bth2021TopupTree.actions"
        UIEventOnDataComponent0:
            watchedDataExpression: "screenSize"
            eventName: "ON_SCREEN_SIZE_CHANGED"
    children:
    -   class: "UIControl"
        name: "SafeArea"
        input: false
        components:
            Anchor:
                hCenterAnchorEnabled: true
            SizePolicy:
                horizontalPolicy: "Formula"
                horizontalFormula: "parent - safeAreaInsets.left - safeAreaInsets.right"
                verticalPolicy: "PercentOfParent"
        children:
        -   class: "UIControl"
            name: "Content"
            input: false
            components:
                LinearLayout: {}
                SizePolicy:
                    horizontalPolicy: "PercentOfParent"
                    verticalPolicy: "PercentOfParent"
            children:
            -   class: "UIControl"
                name: "LeftArea"
                input: false
                components:
                    SizePolicy:
                        horizontalPolicy: "PercentOfParent"
                        verticalPolicy: "PercentOfParent"
                children:
                -   class: "UIControl"
                    name: "TapArea"
                    components:
                        SizePolicy:
                            horizontalPolicy: "PercentOfParent"
                            verticalPolicy: "PercentOfParent"
                        UIInputEventComponent:
                            onTouchUpInside: "DESELECT"
            -   class: "UIControl"
                name: "StepsArea"
                input: false
                components:
                    Anchor:
                        bottomAnchorEnabled: true
                    SizePolicy:
                        horizontalPolicy: "Formula"
                        horizontalFormula: "max(0.5 * parent, lastChild + 4)"
                        verticalPolicy: "Formula"
                        verticalFormula: "parent - 80"
                children:
                -   class: "UIControl"
                    name: "MaskedBlur"
                    input: false
                    components:
                        UIPostProcessSourceComponent0:
                            id: "StoryMaskedBlur"
                        IgnoreLayout: {}
                        SizePolicy:
                            horizontalPolicy: "PercentOfParent"
                            verticalPolicy: "PercentOfParent"
                    children:
                    -   prototype: "BlurDynamic/BlurDynamic"
                        name: "BlurDynamic"
                        components:
                            UIPostProcessInputComponent:
                                id: "StoryBackground"
                            UIPostProcessTextureComponent0:
                                needClear: true
                    -   class: "UIControl"
                        name: "Mask"
                        input: false
                        components:
                            Background:
                                usePostProcessedSprite: true
                            UIPostProcessInputComponent:
                                id: "StepMasks"
                            UIPostProcessTextureComponent0:
                                materialPath: "~res:/Materials.custom/2d.Textured.Mask.material"
                                needClear: true
                            SizePolicy:
                                horizontalPolicy: "PercentOfParent"
                                verticalPolicy: "PercentOfParent"
                -   class: "UIControl"
                    name: "BackgroundUnderBlur"
                    input: false
                    components:
                        Background:
                            usePostProcessedSprite: true
                        UIPostProcessInputComponent:
                            id: "StoryBackground"
                        UIPostProcessTextureComponent0:
                            materialPath: "~res:/Materials/2d.Textured.material"
                            needClear: true
                        IgnoreLayout: {}
                        SizePolicy:
                            horizontalPolicy: "PercentOfParent"
                            verticalPolicy: "PercentOfParent"
                -   class: "UIControl"
                    name: "ShowMaskedBlur"
                    input: false
                    components:
                        Background:
                            usePostProcessedSprite: true
                        UIPostProcessInputComponent:
                            id: "StoryMaskedBlur"
                        UIPostProcessTextureComponent0:
                            materialPath: "~res:/Materials/2d.Textured.Alphablend.material"
                            needClear: true
                        SizePolicy:
                            horizontalPolicy: "PercentOfParent"
                            verticalPolicy: "PercentOfParent"
                -   class: "UIControl"
                    name: "StepsHolder"
                    input: false
                    components:
                        Anchor:
                            leftAnchorEnabled: true
                        SizePolicy:
                            horizontalPolicy: "PercentOfFirstChild"
                            verticalPolicy: "PercentOfParent"
                        UIChildComponent0:
                            prototypePath: "~res:/UI/Screens3/Common/VerticalScrollView.yaml"
                            args:
                                "useRightInset": "false"
                                "content": "StepsWrapper"
                                "centerContent": "true"
                                "horizontalPolicy": "eSizePolicy.PercentOfFirstChild"
                                "ltrbClip": "vec4(1.000000, 1.000000, 1.000000, 0.000000)"
                            eventActions:
                            - ["ON_SCROLL_VIEW_TOUCH", "DESELECT", ""]
Slots:
-   class: "UIControl"
    name: "StepsWrapper"
    size: [32.000000, 32.000000]
    input: false
    components:
        SizePolicy:
            horizontalPolicy: "PercentOfLastChild"
            verticalPolicy: "PercentOfLastChild"
    children:
    -   class: "UIControl"
        name: "BlurMask"
        visible: false
        input: false
        components:
            UIPostProcessSourceComponent0:
                id: "StepMasks"
            GridLayout:
                columnWidth: 176.000000
                rowHeight: 214.000000
            SizePolicy:
                horizontalPolicy: "Formula"
                horizontalFormula: "childrenSum + 8"
                verticalPolicy: "PercentOfChildrenSum"
            UIRepeatComponent:
                control: "~res:/UI/Screens3/Lobby/Story/Components/RepeatableBlurMask.yaml"
                dataContainer: "storyView.tree.groups.common.steps"
                args:
                    "stepSize": "when _item.step.id == 1 or _item.step.id == 2 or _item.step.id == 3 or _item.step.id == 4 -> eStepSize.XL, eStepSize.L"
                    "gridColumn": "when screenSize.X < 1440 -> (when _item.step.id == 5 or _item.step.id == 6 or _item.step.id == 3 or _item.step.id == 4 -> 0, _item.step.id == 1 or _item.step.id == 2 -> 1, 2), (when _item.step.id == 5 or _item.step.id == 2 or _item.step.id == 7 -> 0, _item.step.id == 1 or _item.step.id == 4 -> 1, _item.step.id == 3 -> 2, 3)"
                    "gridRow": "when screenSize.X < 1440 -> (when _item.step.id == 5 or _item.step.id == 1 -> 0, _item.step.id == 6 or _item.step.id == 2 -> 1, _item.step.id == 3 or _item.step.id == 7 -> 2, 3), (when _item.step.id == 5 or _item.step.id == 1 or _item.step.id == 6 -> 0, _item.step.id == 2 or _item.step.id == 3 -> 1, 2)"
                    "isBlurMask": "true"
        bindings:
        - ["GridLayout.columnCount", "columnCount"]
        - ["GridLayout.rowCount", "rowCount"]
    -   class: "UIControl"
        name: "Steps"
        input: false
        components:
            GridLayout:
                columnWidth: 176.000000
                rowHeight: 214.000000
            SizePolicy:
                horizontalPolicy: "Formula"
                horizontalFormula: "childrenSum + 8"
                verticalPolicy: "PercentOfChildrenSum"
            UIRepeatComponent:
                control: "~res:/UI/Screens3/Lobby/Story/Components/Repeatable.yaml"
                dataContainer: "storyView.tree.groups.common.steps"
                args:
                    "model": "_item"
                    "stepSize": "when _item.step.id == 1 or _item.step.id == 2 or _item.step.id == 3 or _item.step.id == 4 -> eStepSize.XL, eStepSize.L"
                    "gridColumn": "when screenSize.X < 1440 -> (when _item.step.id == 5 or _item.step.id == 6 or _item.step.id == 3 or _item.step.id == 4 -> 0, _item.step.id == 1 or _item.step.id == 2 -> 1, 2), (when _item.step.id == 5 or _item.step.id == 2 or _item.step.id == 7 -> 0, _item.step.id == 1 or _item.step.id == 4 -> 1, _item.step.id == 3 -> 2, 3)"
                    "gridRow": "when screenSize.X < 1440 -> (when _item.step.id == 5 or _item.step.id == 1 -> 0, _item.step.id == 6 or _item.step.id == 2 -> 1, _item.step.id == 3 or _item.step.id == 7 -> 2, 3), (when _item.step.id == 5 or _item.step.id == 1 or _item.step.id == 6 -> 0, _item.step.id == 2 or _item.step.id == 3 -> 1, 2)"
                eventActions:
                - ["DESELECT", "DESELECT", ""]
                - ["SELECT_STEP", "SCROLL_TO_STEP", "_event.id, \"**/Step\" + str(_event.id)"]
                - ["SHOW_STEP_INFO", "SHOW_STEP_INFO", "_event.id"]
                elementNameExpression: "\"Step\" + str(_item.step.id)"
        bindings:
        - ["GridLayout.columnCount", "columnCount"]
        - ["GridLayout.rowCount", "rowCount"]
