Header:
    version: "96"
ImportedPackages:
- "~res:/UI/Screens/Lobby/Story/Legacy/StoryFooterNotSelected.yaml"
Controls:
-   prototype: "StoryFooterNotSelected/StoryFooterNotSelected"
    name: "StoryFooterSelected"
    components:
        UIDataParamsComponent:
            params:
            - ["Story", "story", "null", "{ }"]
            - ["StatsDataModel", "statsData", "null", "{ }"]
            - ["StoryStepModel", "selectedStep", "null", "{ }"]
        UIDataLocalsComponent:
            locals:
            - ["bool", "isStepReadyToComplete", "selectedStep.net.price.Empty() and not selectedStep.isFinished"]
            - ["bool", "isButtonEnabled", "(selectedStep.canBuy and not selectedStep.isFinished) or isStepReadyToComplete"]
            - ["string", "buttonText", "when isButtonEnabled and not isStepReadyToComplete -> \"#common:DialogButton/Buy\", \"#common:DialogButton/Complete\""]
            - ["string", "buyLabel", "when story.stage.type == eStageType.BUY -> \"#common:Cost\", story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line2\", \"\""]
            - ["ResourceDetailed", "priceItem", "selectedStep.price[0]"]
            - ["bool", "isEnoughCurrencyForOneStep", "isStepReadyToComplete and selectedStep.net.unlockPath.Size() == 1"]
            - ["bool", "isEnoughCurrencyForSomeStep", "isStepReadyToComplete and selectedStep.net.unlockPath.Size() > 1"]
            - ["bool", "isBuyCaptionVisible", "selectedStep.net.buyout.type != ResourceType.undefined and not isEnoughCurrencyForOneStep and not isEnoughCurrencyForSomeStep"]
            - ["string", "generalLabelBuy", "when selectedStep.net.price.Size() > 1 -> \"template_event/ProgressStage/LackingCurrencies\", selectedStep.net.price.Size() == 1 -> \"template_event/ProgressStage/LackingCurrency\", \"\""]
            - ["string", "generalLabelNotEnough", "when story.stage.type == eStageType.BUY -> generalLabelBuy, story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line1\", \"\""]
            - ["string", "generalLabel", "when isEnoughCurrencyForOneStep -> \"template_event/ProgressStage/EnoughCurrenciesToCompleteStep\", isEnoughCurrencyForSomeStep -> \"template_event/ProgressStage/EnoughCurrenciesToCompleteSteps\", not isStepReadyToComplete -> generalLabelNotEnough, \"\""]
            - ["string", "buyLabel", "when story.stage.type == eStageType.BUY -> \"#common:Cost\", story.stage.type == eStageType.PROCESS -> \"template_event/ProgressStage/LackingCurrency/Line2\", \"\""]
            - ["bool", "isGeneralCurrenciesVisible", "not selectedStep.isFinished"]
            - ["string", "customDescription", "\"\""]
    children:
    -   path: "Content"
        children:
        -   class: "UIControl"
            name: "Caption"
            input: false
            components:
                Anchor:
                    rightAnchorEnabled: true
                    rightAnchor: 286.000000
                    vCenterAnchorEnabled: true
                LinearLayout:
                    orientation: "TopDown"
                SizePolicy:
                    horizontalPolicy: "PercentOfMaxChild"
                    verticalPolicy: "PercentOfChildrenSum"
            bindings:
            - ["visible", "not selectedStep.isFinished"]
            children:
            -   class: "UIControl"
                name: "General"
                input: false
                components:
                    Anchor:
                        rightAnchorEnabled: true
                    LinearLayout:
                        spacing: 20.000000
                        useRtl: true
                    SizePolicy:
                        horizontalPolicy: "PercentOfChildrenSum"
                        verticalPolicy: "PercentOfMaxChild"
                children:
                -   class: "UIControl"
                    name: "Label"
                    input: false
                    classes: "text1 text-color-blue"
                    components:
                        UITextComponent:
                            colorInheritType: "COLOR_IGNORE_PARENT"
                            align: ["RIGHT", "VCENTER"]
                        Anchor:
                            rightAnchorEnabled: true
                            vCenterAnchorEnabled: true
                        SizePolicy:
                            horizontalPolicy: "PercentOfContent"
                            verticalPolicy: "PercentOfContent"
                        StyleSheet:
                            styles: "~res:/UI/Screens/Fonts.yaml;~res:/UI/Screens/FontsColors.yaml"
                    bindings:
                    - ["UITextComponent.text", "localize(generalLabel)"]
                -   class: "UIControl"
                    name: "CurrenciesContainer"
                    input: false
                    components:
                        Anchor:
                            rightAnchorEnabled: true
                            vCenterAnchorEnabled: true
                        LinearLayout:
                            spacing: 10.000000
                        SizePolicy:
                            horizontalPolicy: "PercentOfChildrenSum"
                            verticalPolicy: "PercentOfMaxChild"
                        UIRepeatComponent:
                            control: "~res:/UI/Screens/Lobby/Story/Legacy/Utils/Resource/Small/ResourceDetailed.yaml"
                            dataContainer: "when isStepReadyToComplete -> selectedStep.price, selectedStep.net.price"
                            args:
                                "resource": "_item"
                                "isEnough": "when isStepReadyToComplete -> true, _item.type == ResourceType.stuff -> _item.stuff.quantity < 0, _item.basic.quantity < 0"
                    bindings:
                    - ["visible", "isGeneralCurrenciesVisible"]
            -   class: "UIControl"
                name: "Buy"
                input: false
                components:
                    Anchor:
                        rightAnchorEnabled: true
                    LinearLayout:
                        spacing: 20.000000
                        useRtl: true
                    SizePolicy:
                        horizontalPolicy: "PercentOfChildrenSum"
                        verticalPolicy: "PercentOfMaxChild"
                bindings:
                - ["visible", "isBuyCaptionVisible and empty(customDescription)"]
                children:
                -   class: "UIControl"
                    name: "Label"
                    input: false
                    classes: "text1 text-color-blue"
                    components:
                        UITextComponent:
                            colorInheritType: "COLOR_IGNORE_PARENT"
                            align: ["RIGHT", "VCENTER"]
                        Anchor:
                            rightAnchorEnabled: true
                            vCenterAnchorEnabled: true
                        SizePolicy:
                            horizontalPolicy: "PercentOfContent"
                            verticalPolicy: "PercentOfContent"
                        StyleSheet:
                            styles: "~res:/UI/Screens/Fonts.yaml;~res:/UI/Screens/FontsColors.yaml"
                    bindings:
                    - ["UITextComponent.text", "localize(buyLabel)"]
                -   class: "UIControl"
                    name: "GoldHolder"
                    input: false
                    components:
                        Anchor:
                            vCenterAnchorEnabled: true
                        SizePolicy:
                            horizontalPolicy: "PercentOfFirstChild"
                            verticalPolicy: "PercentOfFirstChild"
                        UIChildComponent0:
                            childType: "kOldExpression"
                            control: "\"~res:/UI/Screens/Lobby/Story/Legacy/Utils/Resource/Small/ResourceDetailed.yaml\""
                            args:
                                "resource": "selectedStep.net.buyout"
                                "isEnough": "when not isNull(selectedStep.net.buyout.basic) -> statsData.gold.quantity >= selectedStep.net.buyout.basic.quantity, false"
            -   class: "UIControl"
                name: "CustomDescription"
                input: false
                classes: "text1 text-color-blue"
                components:
                    UITextComponent:
                        colorInheritType: "COLOR_IGNORE_PARENT"
                    Anchor:
                        rightAnchorEnabled: true
                        vCenterAnchorEnabled: true
                    SizePolicy:
                        horizontalPolicy: "PercentOfContent"
                        verticalPolicy: "PercentOfContent"
                    StyleSheet:
                        styles: "~res:/UI/Screens/Fonts.yaml;~res:/UI/Screens/FontsColors.yaml"
                bindings:
                - ["visible", "not empty(customDescription)"]
                - ["UITextComponent.text", "localize(customDescription)"]
    -   path: "Content/Button"
        bindings:
        - ["enabled", "isButtonEnabled"]
        children: []
    -   path: "Content/Button/Caption"
        components:
            UITextComponent: {}
        bindings:
        - ["UITextComponent.text", "localize(buttonText)"]
